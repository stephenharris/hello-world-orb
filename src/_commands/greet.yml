description: >
  This command echos "Hello World" using file inclusion.
# What will this command do?
# Descriptions should be short, simple, and clear.
parameters:
  wait_for:
    type: integer
    default: 30
    description: "Maximum time to wait for"
  application:
    type: string
    description: "Application ID"
  argocd_url:
    type: string
    description: "URL of Argo"
  target:
    type: string
    description: "Commit hash to check for"
steps:
  - run:
      name: Run python from inline with set environment var
      shell: /bin/bash -eo pipefail
      command: |
        cat >/tmp/cluster_check.py \<<"EOF"
        include ../scripts/cluster_check.py
        EOF

        python3 /tmp/cluster_check.py --wait-for=<<parameters.wait_for>> --application=<<parameters.application>> --target=<<parameters.target>> --argocd-url <<parameters.argocd_url>>
      
